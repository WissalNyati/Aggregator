# Netlify configuration
[build]
  command = "npm run build"
  publish = "dist"

[build.environment]
  SECRETS_SCAN_OMIT_KEYS = "PORT,CLIENT_URL"
  SECRETS_SCAN_OMIT_PATHS = "render.yaml,railway.json,server/**,dist/**"
  VITE_API_URL = "https://physician-search-api-production.up.railway.app"

[functions]
  directory = "netlify/functions"

# Redirect all requests to index.html (SPA routing)
# Netlify automatically handles /.netlify/functions/* routes, so they won't be caught by this redirect
# This ensures client-side routing works for React SPA
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
  
# Explicitly allow robots.txt and sitemap.xml
[[redirects]]
  from = "/robots.txt"
  to = "/robots.txt"
  status = 200
  force = true

[[redirects]]
  from = "/sitemap.xml"
  to = "/sitemap.xml"
  status = 200
  force = true

# Ensure sitemap.xml and robots.txt are accessible
[[headers]]
  for = "/sitemap.xml"
  [headers.values]
    Content-Type = "application/xml"

[[headers]]
  for = "/robots.txt"
  [headers.values]
    Content-Type = "text/plain"


